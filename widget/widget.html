<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renovation Visualizer</title>
    <link rel="stylesheet" href="widget.css">
</head>
<body>
    <div class="rv-widget-container">
        <div class="rv-header">
            <h2>âœ¨ Visualize Your Dream Space</h2>
            <p>See what your renovation could look like - instantly!</p>
        </div>

        <!-- Step 1: Upload -->
        <div class="rv-step active" id="step-upload">
            <h3>1. Upload Your Photo</h3>
            <div class="rv-upload-area" id="uploadArea">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                </svg>
                <p>Drag & drop or click to browse</p>
                <input type="file" id="fileInput" accept="image/*" style="display: none;">
            </div>
            <div id="imagePreview" style="display: none;">
                <img id="previewImg" alt="Preview">
            </div>
        </div>

        <!-- Step 2: Choose Style -->
        <div class="rv-step" id="step-style">
            <h3>2. Choose Your Style</h3>
            <select id="styleSelect" class="rv-select">
                <option value="">Select a style...</option>
            </select>
            <p class="rv-or">Or describe what you want:</p>
            <input type="text" id="customPrompt" placeholder="E.g., modern white kitchen with marble countertops" class="rv-input">
        </div>

        <!-- Step 3: Generate -->
        <div class="rv-step" id="step-generate">
            <button id="generateBtn" class="rv-button" disabled>
                Generate My Vision
            </button>
        </div>

        <!-- Loading -->
        <div id="loading" class="rv-loading" style="display: none;">
            <div class="rv-spinner"></div>
            <p>Creating your vision...</p>
        </div>

        <!-- Results with Lead Form -->
        <div id="results" class="rv-results" style="display: none;">
            <h3>Here's Your Vision! ðŸŽ‰</h3>
            <div class="rv-comparison">
                <div>
                    <h4>Before</h4>
                    <img id="beforeImg" alt="Before">
                </div>
                <div>
                    <h4>After</h4>
                    <img id="afterImg" alt="After" class="rv-blurred">
                </div>
            </div>

            <!-- Lead Capture Form -->
            <div class="rv-lead-form">
                <h3>Love it? Get Your Free Quote!</h3>
                <p>Unlock the full image and get a detailed quote for your project</p>
                
                <form id="leadForm">
                    <input type="text" name="name" placeholder="Your Name *" required class="rv-input">
                    <input type="email" name="email" placeholder="Email Address *" required class="rv-input">
                    <input type="tel" name="phone" placeholder="Phone Number *" required class="rv-input">
                    <input type="text" name="postcode" placeholder="Postcode *" required class="rv-input">
                    
                    <select name="budget" required class="rv-select">
                        <option value="">Project Budget</option>
                        <option value="under-5k">Under Â£5,000</option>
                        <option value="5k-10k">Â£5,000 - Â£10,000</option>
                        <option value="10k-20k">Â£10,000 - Â£20,000</option>
                        <option value="20k-plus">Â£20,000+</option>
                    </select>
                    
                    <select name="timeline" required class="rv-select">
                        <option value="">When do you want to start?</option>
                        <option value="asap">As soon as possible</option>
                        <option value="1-3months">1-3 months</option>
                        <option value="3-6months">3-6 months</option>
                        <option value="6plus">6+ months</option>
                    </select>
                    
                    <textarea name="notes" placeholder="Any additional details..." class="rv-input" rows="3"></textarea>
                    
                    <button type="submit" class="rv-button">Get My Free Quote</button>
                </form>
            </div>

            <!-- Success Message -->
            <div id="successMessage" style="display: none;">
                <h3>âœ… Thank You!</h3>
                <p>Your quote request has been sent. We'll contact you within 24 hours!</p>
                <img id="finalImg" alt="Your Vision">
                <button id="downloadBtn" class="rv-button-secondary">Download Image</button>
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMsg" class="rv-error" style="display: none;"></div>
    </div>

    <script>
        // Pass company ID from embed script
        window.COMPANY_ID = window.RENOVATION_VISION_COMPANY_ID || 'demo';
        window.API_URL = 'http://localhost:3000'; // Change to your production URL
    </script>
    <script src="widget.js"></script>
</body>
</html>